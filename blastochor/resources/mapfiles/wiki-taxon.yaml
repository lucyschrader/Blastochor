---
- core:
  label: wiki_arachnids
  reference_column: null
  primary_endpoint: object
  explode: null
  reduce: null
  extend:
    - 1:
      endpoint: agent
      path: identification.i.identifiedBy.id
      for_label: null
    - 2:
      endpoint: agent
      path: evidenceFor.atEvent.recordedBy.i.id
      for_label: null
    - 3:
      endpoint: taxon
      path: identification.i.toTaxon.id
      for_label: wiki_arachnids_taxonomy
  fields:
    - filename:
      - hardcoded:
        - null
    - filenamePath:
      - hardcoded:
        - null
    - wikitext:
      - hardcoded:
        - null
    - irn:
      - literal:
        - id
    - title:
      - literal:
        - title
    - collection:
      - literal:
        - collectionLabel
    - basisOfRecord:
      - literal:
        - basisOfRecord
    - vernacularName:
      - literal:
        - identification.i.toTaxon.vernacularName.i.title
    - qualifiedName:
      - literal:
        - identification.i.qualifiedName
    - typeStatus:
      - literal:
        - identification.i.typeStatus
    - identifiedByID:
      - literal:
        - identification.i.identifiedBy.id
    - identifiedByTitle:
      - literal:
        - identification.i.identifiedBy.title
    - identifiedByORCID:
      - literal:
        - identification.i.identifiedBy.id
      - lookup:
        - agent
      - conditional:
        - related.i.contentUrl
        - related.i.title=ORCID
    - identifiedByQID:
      - literal:
        - identification.i.identifiedBy.id
      - lookup:
        - agent
      - conditional:
        - related.i.contentUrl
        - related.i.title=Wikidata
    - dateIdentified:
      - literal:
        - identification.i.dateIdentified
    - scientificName:
      - literal:
        - identification.i.toTaxon.scientificName
    - genus:
      - literal:
        - identification.i.toTaxon.genus
    - family:
      - literal:
        - identification.i.toTaxon.family
    - specimenType:
      - literal:
        - specimenType
    - recordedByID:
      - collate_list:
        - evidenceFor.atEvent.recordedBy.i.id
    - recordedByTitle:
      - collate_list:
        - evidenceFor.atEvent.recordedBy.i.title
    - recordedByORCID:
      - collate_list:
        - evidenceFor.atEvent.recordedBy.i.id
      - for_each:
        - lookup:
          - agent
        - conditional:
          - related.i.contentUrl
          - related.i.title=ORCID
    - recordedByQID:
      - collate_list:
        - evidenceFor.atEvent.recordedBy.i.id
      - for_each:
        - lookup:
          - agent
        - conditional:
          - related.i.contentUrl
          - related.i.title=Wikidata
    - dateCollected:
      - literal:
        - evidenceFor.atEvent.eventDate
    - countryCollected:
      - literal:
        - evidenceFor.atEvent.atLocation.country
    - stateProvinceCollected:
      - literal:
        - evidenceFor.atEvent.atLocation.stateProvince
    - localityCollected:
      - literal:
        - evidenceFor.atEvent.atLocation.locality
    - mediaIrn:
      - literal:
        - hasRepresentation.i.id
    - mediaWidth:
      - literal:
        - hasRepresentation.i.width
    - mediaHeight:
      - literal:
        - hasRepresentation.i.height
    - rightsTitle:
      - literal:
        - hasRepresentation.i.rights.title
    - copyrightStatusQID:
      - literal:
        - hasRepresentation.i.rights.title
      - map_value:
          No Known Copyright Restrictions: Q19652
          CC BY 4.0: Q50423863
    - copyrightLicenseQID:
      - literal:
        - hasRepresentation.i.rights.title
      - map_value:
          CC BY 4.0: Q20007257
    - creditLine:
      - literal:
        - creditLine
    - institutionCode:
      - literal:
        - institutionCode
    - institution:
      - hardcoded:
        - Museum of New Zealand Te Papa Tongarewa
    - institutionQID:
      - hardcoded:
        - Q915603
    - references:
      - format_string:
        - https://collections.tepapa.govt.nz/object/{}
        - id
    - identifier:
      - literal:
        - identifier

- taxonomy:
  label: wiki_arachnids_taxonomy
  reference_column: null
  primary_endpoint: taxon
  explode: null
  reduce: null
  extend: null
  fields:
    - taxonID:
      - literal:
        - id
    - taxonQID:
      - conditional:
        - related.i.contentUrl
        - related.i.title=Wikidata
    - title:
      - literal:
        - title
    - scientificNameAuthorshipSummary:
      - literal:
        - scientificNameAuthorshipSummary
    - authorName:
      - collate_list:
        - scientificNameAuthorship.i.title
    - scientificName:
      - literal:
        - scientificName
    - family:
      - literal:
        - family
    - genus:
      - literal:
        - genus
    - species:
      - literal:
        - species
    - subspecies:
      - literal:
        - subspecies
    - taxonRank:
      - literal:
        - taxonRank
    - vernacularNames:
      - collate_list:
        - vernacularName
      - for_each:
        - format_string:
          - "{} ({})"
          - title, language
