---
- default:
  label: wiki
  primary_endpoint: object
  explode: hasRepresentation
  reduce: null
  extend:
    - 1:
      endpoint: agent
      path: evidenceFor.atEvent.recordedBy.i.id
      for_label: null
    - 2:
      endpoint: agent
      path: identification.i.identifiedBy.id
      for_label: null
  fields:
    - filename:
      - hardcoded:
        - null
    - filenamePath:
      - hardcoded:
        - null
    - wikitext:
      - hardcoded:
        - null
    - irn:
      - literal:
        - id
    - identifier:
      - literal:
        - identifier
    - title:
      - literal:
        - title
    - collection:
      - literal:
        - collectionLabel
    - basisOfRecord:
      - literal:
        - basisOfRecord
    - specimenType:
      - literal:
        - specimenType
    - mediaIrn:
      - literal:
        - hasRepresentation.i.id
    - mediaWidth:
      - literal:
        - hasRepresentation.i.width
    - mediaHeight:
      - literal:
        - hasRepresentation.i.height
    - rightsTitle:
      - literal:
        - hasRepresentation.i.rights.title
    - copyrightStatusQID:
      - hardcoded:
        - null
    - copyrightLicenseQID:
      - hardcoded:
        - null
    - recordedByID:
      - collate_list:
        - evidenceFor.atEvent.recordedBy.i.id
    - recordedByTitle:
      - collate_list:
        - evidenceFor.atEvent.recordedBy.i.title
    - recordedByORCID:
      - collate_list:
        - evidenceFor.atEvent.recordedBy.i.id
      - for_each:
        - lookup:
          - agent
        - conditional:
          - related.i.contentUrl
          - related.i.title=ORCID
        - concatenate:
          - null
    - recordedByQID:
      - collate_list:
        - evidenceFor.atEvent.recordedBy.i.id
      - for_each:
        - lookup:
          - agent
        - conditional:
          - related.i.contentUrl
          - related.i.title=Wikidata
        - concatenate:
          - null
    - dateCollected:
      - literal:
        - evidenceFor.atEvent.eventDate
    - countryCollected:
      - literal:
        - evidenceFor.atEvent.atLocation.country
    - stateProvinceCollected:
      - literal:
        - evidenceFor.atEvent.atLocation.stateProvince
    - localityCollected:
      - literal:
        - evidenceFor.atEvent.atLocation.locality
    - identifiedByID:
      - literal:
        - identification.i.identifiedBy.id
    - identifiedByTitle:
      - literal:
        - identification.i.identifiedBy.title
    - identifiedByORCID:
      - literal:
        - identification.i.identifiedBy.id
      - lookup:
        - agent
      - conditional:
        - related.i.contentUrl
        - related.i.title=ORCID
    - identifiedByQID:
      - literal:
        - identification.i.identifiedBy.id
      - lookup:
        - agent
      - conditional:
        - related.i.contentUrl
        - related.i.title=Wikidata
    - dateIdentified:
      - literal:
        - identification.i.dateIdentified
    - qualifiedName:
      - literal:
        - identification.i.qualifiedName
    - scientificName:
      - literal:
        - identification.i.toTaxon.scientificName
    - genus:
      - literal:
        - identification.i.toTaxon.genus
    - family:
      - literal:
        - identification.i.toTaxon.family
    - vernacularName:
      - literal:
        - identification.i.toTaxon.vernacularName.i.title
    - typeStatus:
      - literal:
        - identification.i.typeStatus
    - creditLine:
      - literal:
        - creditLine
    - institution:
      - hardcoded:
        - Te Papa
    - institutionQID:
      - hardcoded:
        - Q915603
    - herbarium:
      - hardcoded:
        - WELT
    - herbariumQID:
      - hardcoded:
        - Q51109064
    - coUrl:
      - format_string:
        - https://collections.tepapa.govt.nz/object/{}
        - id
    - coUrlText:
      - hardcoded:
        - Te Papa Collections Online